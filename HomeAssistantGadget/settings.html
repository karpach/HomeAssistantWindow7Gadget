<html xmlns="http://www.w3.org/1999/xhtml">
<head>  
  <style>
    body {      
      font-family: Segoe UI, Arial, sans-serif;      
      margin: 0;
      height: 150px; 
      width: 220px;     
    }       
    textarea {
      width: 100%;
      height: 80px;      
    }    
    input {
      width: 100%;      
      margin-bottom: 8px;
    }
  </style>  
  <script>
    document.onreadystatechange = function()
    {    
        if(document.readyState=="complete")
        {
            var token = System.Gadget.Settings.read("ha_long_lived_token");
            if(token != "")
            {
                document.getElementById('token').value = token;
            }
            var url = System.Gadget.Settings.read("ha_url");
            if(url != "")
            {
                document.getElementById('url').value = url;
            }      
        }        
    }
    System.Gadget.onSettingsClosing = function(event)
    {
      if (event.closeAction == event.Action.commit)
      {
          var token = document.getElementById('token').value;
          if(token != "")
          {
              System.Gadget.Settings.write("ha_long_lived_token", token);              
          }
          var url = document.getElementById('url').value;
          if(url != "")
          {
              System.Gadget.Settings.write("ha_url", url);              
          }
          event.cancel = false;
      }
    };
  </script>
</head>
<body>  
   Home Assistant Url:<br />
   <input type="text" id="url" name="url" />
   Home Assistant Long-Lived Token:<br />   
   <textarea id="token" name="token"></textarea>
</body>
</html>
